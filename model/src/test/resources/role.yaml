inherits:
- role: superRole1
- role: superRole2

variants:
- variant: services
  config:
    var1: value1_service
- variant: importer

templateDir: tomcat-services

files:

- file: "systemconfig-importer.txt"
  dir: data/deploy
  template: systemconfig-importer.txt.hbs
  variants:
  - importer
  - variant2*
  - variant3
  condition: "${abc}"
  fileHeader: sling-provisioning
  validators:
  - sling-provisioning-model
  validatorOptions:
    option1: value1
  postProcessors:
  - osgi-config-generator
  postProcessorOptions:
    option2: value2
  multiply: none
  charset: UTF-8
  lineEndings: windows
  escapingStrategy: none

- file: ROOT.xml
  dir: conf/Catalina/localhost
  template: ROOT.xml.hbs
  validators:
  - xml

- file: setenv.sh
  dir: bin
  template: setenv.sh.hb
  charset: ISO-8859-1

- file: systemconfig.txt
  dir: data/deploy
  template: systemconfig.txt.hbs
  validators:
  - sling-provisioning-model
  postProcessors:
  - osgi-config-generator

- file: "${tenant}_vhost.conf"
  dir: vhosts
  template: tenant_vhost.conf.hb
  multiply: tenant
  multiplyOptions:
    roles:
    - website

- url: classpath://xyz.txt
  dir: download
  modelOptions:
    modelOption1: value1

# Defines configuration parameters and default values
config:
  var1: value1

  tomcat:
    port: 8080
    path: /path/to/tomcat

  jvm:
    heapspace:
      min: 512m
      max: 2048m
    permgenspace:
      max: 256m

  topologyConnectors:
    - http://localhost:8080/libs/sling/topology/connector
